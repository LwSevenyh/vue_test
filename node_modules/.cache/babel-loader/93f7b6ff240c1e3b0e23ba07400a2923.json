{"remainingRequest":"/Users/tina/seven/vue_test/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/tina/seven/vue_test/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/tina/seven/vue_test/src/permission.js","dependencies":[{"path":"/Users/tina/seven/vue_test/src/permission.js","mtime":1572428741117},{"path":"/Users/tina/seven/vue_test/node_modules/cache-loader/dist/cjs.js","mtime":1566786504464},{"path":"/Users/tina/seven/vue_test/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1566786501591},{"path":"/Users/tina/seven/vue_test/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1569153234749}],"contextDependencies":[],"result":["// import router from './router'\n// import store from './store'\n// import { Message } from 'element-ui'\n// import NProgress from 'nprogress' // progress bar\n// import 'nprogress/nprogress.css' // progress bar style\n// import { getToken } from '@/utils/auth' // get token from cookie\n// import getPageTitle from '@/utils/get-page-title'\n// NProgress.configure({ showSpinner: false }) // NProgress Configuration\n// const whiteList = ['/login', '/auth-redirect'] // no redirect whitelist\n// router.beforeEach(async(to, from, next) => {\n//   // start progress bar\n//   NProgress.start()\n//   // set page title\n//   document.title = getPageTitle(to.meta.title)\n//   // determine whether the user has logged in\n//   const hasToken = getToken()\n//   if (hasToken) {\n//     if (to.path === '/login') {\n//       // if is logged in, redirect to the home page\n//       next({ path: '/' })\n//       NProgress.done()\n//     } else {\n//       // determine whether the user has obtained his permission roles through getInfo\n//       const hasRoles = store.getters.roles && store.getters.roles.length > 0\n//       if (hasRoles) {\n//         next()\n//       } else {\n//         try {\n//           // get user info\n//           // note: roles must be a object array! such as: ['admin'] or ,['developer','editor']\n//           const { roles } = await store.dispatch('user/getInfo')\n//           // generate accessible routes map based on roles\n//           const accessRoutes = await store.dispatch('permission/generateRoutes', roles)\n//           // dynamically add accessible routes\n//           router.addRoutes(accessRoutes)\n//           // hack method to ensure that addRoutes is complete\n//           // set the replace: true, so the navigation will not leave a history record\n//           next({ ...to, replace: true })\n//         } catch (error) {\n//           // remove token and go to login page to re-login\n//           await store.dispatch('user/resetToken')\n//           Message.error(error || 'Has Error')\n//           next(`/login?redirect=${to.path}`)\n//           NProgress.done()\n//         }\n//       }\n//     }\n//   } else {\n//     /* has no token*/\n//     if (whiteList.indexOf(to.path) !== -1) {\n//       // in the free login whitelist, go directly\n//       next()\n//     } else {\n//       // other pages that do not have permission to access are redirected to the login page.\n//       next(`/login?redirect=${to.path}`)\n//       NProgress.done()\n//     }\n//   }\n// })\n// router.afterEach(() => {\n//   // finish progress bar\n//   NProgress.done()\n// })",{"version":3,"sources":["/Users/tina/seven/vue_test/src/permission.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA","sourcesContent":["// import router from './router'\n// import store from './store'\n// import { Message } from 'element-ui'\n// import NProgress from 'nprogress' // progress bar\n// import 'nprogress/nprogress.css' // progress bar style\n// import { getToken } from '@/utils/auth' // get token from cookie\n// import getPageTitle from '@/utils/get-page-title'\n\n// NProgress.configure({ showSpinner: false }) // NProgress Configuration\n\n// const whiteList = ['/login', '/auth-redirect'] // no redirect whitelist\n\n// router.beforeEach(async(to, from, next) => {\n//   // start progress bar\n//   NProgress.start()\n\n//   // set page title\n//   document.title = getPageTitle(to.meta.title)\n\n//   // determine whether the user has logged in\n//   const hasToken = getToken()\n\n//   if (hasToken) {\n//     if (to.path === '/login') {\n//       // if is logged in, redirect to the home page\n//       next({ path: '/' })\n//       NProgress.done()\n//     } else {\n//       // determine whether the user has obtained his permission roles through getInfo\n//       const hasRoles = store.getters.roles && store.getters.roles.length > 0\n//       if (hasRoles) {\n//         next()\n//       } else {\n//         try {\n//           // get user info\n//           // note: roles must be a object array! such as: ['admin'] or ,['developer','editor']\n//           const { roles } = await store.dispatch('user/getInfo')\n\n//           // generate accessible routes map based on roles\n//           const accessRoutes = await store.dispatch('permission/generateRoutes', roles)\n\n//           // dynamically add accessible routes\n//           router.addRoutes(accessRoutes)\n\n//           // hack method to ensure that addRoutes is complete\n//           // set the replace: true, so the navigation will not leave a history record\n//           next({ ...to, replace: true })\n//         } catch (error) {\n//           // remove token and go to login page to re-login\n//           await store.dispatch('user/resetToken')\n//           Message.error(error || 'Has Error')\n//           next(`/login?redirect=${to.path}`)\n//           NProgress.done()\n//         }\n//       }\n//     }\n//   } else {\n//     /* has no token*/\n\n//     if (whiteList.indexOf(to.path) !== -1) {\n//       // in the free login whitelist, go directly\n//       next()\n//     } else {\n//       // other pages that do not have permission to access are redirected to the login page.\n//       next(`/login?redirect=${to.path}`)\n//       NProgress.done()\n//     }\n//   }\n// })\n\n// router.afterEach(() => {\n//   // finish progress bar\n//   NProgress.done()\n// })\n"]}]}