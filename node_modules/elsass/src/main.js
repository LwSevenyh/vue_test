import Vue from 'vue'

// 导入store
// import sto from 'store'
// 导入国际化相关文件
// import VueI18n from 'vue-i18n'
// import messages from './locale'
import './iview.js'

// 引入组件
import RDialog from '../packages/r-dialog/index.js'
import RTransfer from '../packages/r-transfer/index.js'
import RMessage from '../packages/r-message/index.js'
import RIcon from '../packages/r-icon/index.js'
import RDrawer from '../packages/r-drawer/index.js'
import RBreadcrumb from '../packages/r-breadcrumb/index.js'
import RHeader from '../packages/r-header/index.js'
import RRichText from '../packages/r-rich-text/index.js'

import RCommonDrawer from '../packages/r-common-drawer/index.js'
import RSideMenu from '../packages/r-side-menu/index.js'
import RToolList from '../packages/r-tool-list/index.js'
import RFeedback from '../packages/r-feedback/index.js'
// 图标库引入
import '../util/iconfont.js' // icon->symbol方式的相关文件

// 接口封装调用
import fetch from './apis/fetch/index.js'

// Vue.use(iView)
// 国际化，中英文
// Vue.use(VueI18n)

Vue.config.productionTip = false

const components = [
  RDialog,
  RTransfer,
  RMessage,
  RIcon,
  RDrawer,
  RCommonDrawer,
  RHeader,
  RSideMenu,
  RToolList,
  RBreadcrumb
]

const speComponents = [
  RRichText,
  RFeedback
]

const install = function(iVue, opts = {}) {
  // let local = opts.local || sto.get('i18n')
  // if (!local) {
  //   local = 'zh'
  //   sto.set('i18n', 'zh')
  // }
  // new VueI18n({
  //   locale: local,
  //   messages
  // })
  components.forEach(component => {
    iVue.component(component.name, component);
  })

  if (opts.installAll) {
    speComponents.forEach(component => {
      iVue.component(component.name, component);
    })
  }

  iVue.prototype.$elsassFetch = (optons, params) => fetch(optons, params)
  // Vue.use(InfiniteScroll)
  // Vue.prototype.$rmessage = RMessage;

}

// auto install
if (typeof window !== "undefined" && window.Vue) {
  install(window.Vue);
}

const packjson = require('../package.json')
const version = packjson.version || '0.1.8'
export default {
  version,
  // locale: locale.use,
  // i18n: locale.i18n,
  install,
  ...components,
  ...speComponents
}
