// import Vue from 'vue'
import '../packages/theme-chalk/RDialog.sass'

// 引入组件
import RDialog from '../packages/r-dialog/index.js'
import RFeedback from '../packages/r-feedback/index.js'
// 接口封装调用
import fetch from './apis/fetch/index.js'
const packjson = require('../package.json')

const components = [
  RDialog,
  RFeedback
]

const show_version = function() {
  console.log(
    "%c ",
    `background: url(https://img.shields.io/badge/elsass-${(packjson.version || '0.1.8').replace('-', '')}-green.svg) no-repeat center; background-size: 100px 15px; padding-left: 100px; padding-bottom: 0px;`
  );
}

const install = function(Vue, opts = {}) {
  components.forEach(component => {
    Vue.component(component.name, component)
  })

  Vue.component('r-feedback', RFeedback)
  Vue.prototype.$elsassFetch = (optons, params) => fetch(optons, params)
}

// auto install
if (typeof window !== "undefined" && window.Vue) {
  install(window.Vue)
  show_version()
  console.log("当前版本为: " + (packjson.version || '0.1.8'))
}

const version = packjson.version || '0.1.8'
export default {
  version,
  // locale: locale.use,
  // i18n: locale.i18n,
  install,
  ...components
}
